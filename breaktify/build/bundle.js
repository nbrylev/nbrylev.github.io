var app=function(){"use strict";function t(){}function n(t,n){for(const e in n)t[e]=n[e];return t}function e(t){return t()}function s(){return Object.create(null)}function c(t){t.forEach(e)}function r(t){return"function"==typeof t}function o(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(t,n,e,s){if(t){const c=l(t,n,e,s);return t[0](c)}}function l(t,e,s,c){return t[1]&&c?n(s.ctx.slice(),t[1](c(e))):s.ctx}function a(t,n,e,s){if(t[2]&&s){const c=t[2](s(e));if(void 0===n.dirty)return c;if("object"==typeof c){const t=[],e=Math.max(n.dirty.length,c.length);for(let s=0;s<e;s+=1)t[s]=n.dirty[s]|c[s];return t}return n.dirty|c}return n.dirty}function u(t){const n={};for(const e in t)"$"!==e[0]&&(n[e]=t[e]);return n}function f(t,n){t.appendChild(n)}function p(t,n,e){t.insertBefore(n,e||null)}function $(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function g(){return m(" ")}function b(t,n,e,s){return t.addEventListener(n,e,s),()=>t.removeEventListener(n,e,s)}function h(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}let _;function y(t){_=t}function v(t,n){const e=t.$$.callbacks[n.type];e&&e.slice().forEach(t=>t(n))}const x=[],w=[],k=[],N=[],E=Promise.resolve();let T=!1;function A(t){k.push(t)}let P=!1;const B=new Set;function C(){if(!P){P=!0;do{for(let t=0;t<x.length;t+=1){const n=x[t];y(n),I(n.$$)}for(x.length=0;w.length;)w.pop()();for(let t=0;t<k.length;t+=1){const n=k[t];B.has(n)||(B.add(n),n())}k.length=0}while(x.length);for(;N.length;)N.pop()();T=!1,P=!1,B.clear()}}function I(t){if(null!==t.fragment){t.update(),c(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(A)}}const M=new Set;function q(t,n){t&&t.i&&(M.delete(t),t.i(n))}function S(t,n,e,s){if(t&&t.o){if(M.has(t))return;M.add(t),(void 0).c.push(()=>{M.delete(t),s&&(e&&t.d(1),s())}),t.o(n)}}function j(t){t&&t.c()}function L(t,n,s){const{fragment:o,on_mount:i,on_destroy:l,after_update:a}=t.$$;o&&o.m(n,s),A(()=>{const n=i.map(e).filter(r);l?l.push(...n):c(n),t.$$.on_mount=[]}),a.forEach(A)}function O(t,n){const e=t.$$;null!==e.fragment&&(c(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function H(t,n){-1===t.$$.dirty[0]&&(x.push(t),T||(T=!0,E.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function G(n,e,r,o,i,l,a=[-1]){const u=_;y(n);const f=e.props||{},p=n.$$={fragment:null,ctx:null,props:l,update:t,not_equal:i,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:s(),dirty:a};let d=!1;if(p.ctx=r?r(n,f,(t,e,...s)=>{const c=s.length?s[0]:e;return p.ctx&&i(p.ctx[t],p.ctx[t]=c)&&(p.bound[t]&&p.bound[t](c),d&&H(n,t)),e}):[],p.update(),d=!0,c(p.before_update),p.fragment=!!o&&o(p.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);p.fragment&&p.fragment.l(t),t.forEach($)}else p.fragment&&p.fragment.c();e.intro&&q(n.$$.fragment),L(n,e.target,e.anchor),C()}y(u)}class z{$destroy(){O(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}function D(t){let n,e,s,c;const r=t[2].default,o=i(r,t,t[1],null);return{c(){n=d("button"),o&&o.c(),h(n,"class",e="bt-button "+t[0].class)},m(e,r,i){p(e,n,r),o&&o.m(n,null),s=!0,i&&c(),c=b(n,"click",t[3])},p(t,[c]){o&&o.p&&2&c&&o.p(l(r,t,t[1],null),a(r,t[1],c,null)),(!s||1&c&&e!==(e="bt-button "+t[0].class))&&h(n,"class",e)},i(t){s||(q(o,t),s=!0)},o(t){S(o,t),s=!1},d(t){t&&$(n),o&&o.d(t),c()}}}function F(t,e,s){let{$$slots:c={},$$scope:r}=e;return t.$set=t=>{s(0,e=n(n({},e),u(t))),"$$scope"in t&&s(1,r=t.$$scope)},[e=u(e),r,c,function(n){v(t,n)}]}class J extends z{constructor(t){super(),G(this,t,F,D,o,{})}}const K="action",Q="break",R="stopped",U={[K]:"sandtime.png",[Q]:"palm.png",[R]:"timer.png"},V=[];function W(n,e=t){let s;const c=[];function r(t){if(o(n,t)&&(n=t,s)){const t=!V.length;for(let t=0;t<c.length;t+=1){const e=c[t];e[1](),V.push(e,n)}if(t){for(let t=0;t<V.length;t+=2)V[t][0](V[t+1]);V.length=0}}}return{set:r,update:function(t){r(t(n))},subscribe:function(o,i=t){const l=[o,i];return c.push(l),1===c.length&&(s=e(r)||t),o(n),()=>{const t=c.indexOf(l);-1!==t&&c.splice(t,1),0===c.length&&(s(),s=null)}}}}const X=W(R);function Y(t){let n;return{c(){n=d("span"),h(n,"class","bt-pause-icon")},m(t,e){p(t,n,e)},d(t){t&&$(n)}}}function Z(t){let n;return{c(){n=d("span"),h(n,"class","bt-start-icon")},m(t,e){p(t,n,e)},d(t){t&&$(n)}}}function tt(t){let n;function e(t,n){return t[0]===R?Z:Y}let s=e(t),c=s(t);return{c(){c.c(),n=m("")},m(t,e){c.m(t,e),p(t,n,e)},p(t,r){s!==(s=e(t))&&(c.d(1),c=s(t),c&&(c.c(),c.m(n.parentNode,n)))},d(t){c.d(t),t&&$(n)}}}function nt(t){let n,e,s,c,r,o;const i=new J({props:{class:"bt-panel__button",$$slots:{default:[tt]},$$scope:{ctx:t}}});return i.$on("click",t[1]),{c(){n=d("div"),e=d("div"),c=g(),j(i.$$.fragment),h(e,"class",s="bt-panel__state-icon bt-panel__state-icon_"+U[t[0]].replace(".png","")),h(n,"class",r="bt-panel "+t[2].class)},m(t,s){p(t,n,s),f(n,e),f(n,c),L(i,n,null),o=!0},p(t,[c]){(!o||1&c&&s!==(s="bt-panel__state-icon bt-panel__state-icon_"+U[t[0]].replace(".png","")))&&h(e,"class",s);const l={};17&c&&(l.$$scope={dirty:c,ctx:t}),i.$set(l),(!o||4&c&&r!==(r="bt-panel "+t[2].class))&&h(n,"class",r)},i(t){o||(q(i.$$.fragment,t),o=!0)},o(t){S(i.$$.fragment,t),o=!1},d(t){t&&$(n),O(i)}}}function et(t,e,s){let c;X.subscribe(t=>{s(0,c=t)});return t.$set=t=>{s(2,e=n(n({},e),u(t)))},e=u(e),[c,function(){X.set(c===R?K:R)},e]}class st extends z{constructor(t){super(),G(this,t,et,nt,o,{})}}function ct(n){let e,s,c;return{c(){e=d("input"),h(e,"class",s="bt-input "+n[4].class),h(e,"type",n[0]),h(e,"placeholder",n[1]),h(e,"min",n[3]),e.value=n[2]},m(t,s,r){p(t,e,s),r&&c(),c=b(e,"input",n[5])},p(t,[n]){16&n&&s!==(s="bt-input "+t[4].class)&&h(e,"class",s),1&n&&h(e,"type",t[0]),2&n&&h(e,"placeholder",t[1]),8&n&&h(e,"min",t[3]),4&n&&e.value!==t[2]&&(e.value=t[2])},i:t,o:t,d(t){t&&$(e),c()}}}function rt(t,e,s){let{type:c}=e,{placeholder:r}=e,{value:o}=e,{min:i}=e;return t.$set=t=>{s(4,e=n(n({},e),u(t))),"type"in t&&s(0,c=t.type),"placeholder"in t&&s(1,r=t.placeholder),"value"in t&&s(2,o=t.value),"min"in t&&s(3,i=t.min)},e=u(e),[c,r,o,i,e,function(n){v(t,n)}]}class ot extends z{constructor(t){super(),G(this,t,rt,ct,o,{type:0,placeholder:1,value:2,min:3})}}const it=W(15),lt=W(15),at=W("Пришло время перерыва!"),ut=function(n,e,s){const o=!Array.isArray(n),i=o?[n]:n,l=e.length<2;return{subscribe:W(s,n=>{let s=!1;const a=[];let u=0,f=t;const p=()=>{if(u)return;f();const s=e(o?a[0]:a,n);l?n(s):f=r(s)?s:t},$=i.map((n,e)=>function(n,...e){if(null==n)return t;const s=n.subscribe(...e);return s.unsubscribe?()=>s.unsubscribe():s}(n,t=>{a[e]=t,u&=~(1<<e),s&&p()},()=>{u|=1<<e}));return s=!0,p(),function(){c($),f()}}).subscribe}}([it,lt,at],([t,n,e])=>({intervalTime:t,breakTime:n,notificationMessage:e}));function ft(t){let n,e,s,c,r,o,i,l,a,u,m,b,_,y,v,x;const w=new ot({props:{class:"bt-settings__control",type:"number",placeholder:"Интервал",min:"0",value:t[0]}});w.$on("input",pt);const k=new ot({props:{class:"bt-settings__control",type:"number",placeholder:"Перерыв",min:"0",value:t[1]}});k.$on("input",$t);const N=new ot({props:{class:"bt-settings__control",placeholder:"Сообщение",value:t[2]}});return N.$on("input",dt),{c(){n=d("form"),e=d("h1"),e.textContent="Breaktify",s=g(),c=d("div"),r=d("label"),r.textContent="Интервал (мин)",o=g(),j(w.$$.fragment),i=g(),l=d("div"),a=d("label"),a.textContent="Перерыв (сек)",u=g(),j(k.$$.fragment),m=g(),b=d("div"),_=d("label"),_.textContent="Сообщение",y=g(),j(N.$$.fragment),h(e,"class","bt-settings__header"),h(r,"class","bt-settings__label"),h(c,"class","bt-settings__row"),h(a,"class","bt-settings__label"),h(l,"class","bt-settings__row"),h(_,"class","bt-settings__label"),h(b,"class","bt-settings__row"),h(n,"class",v="bt-settings "+t[3].class)},m(t,$){p(t,n,$),f(n,e),f(n,s),f(n,c),f(c,r),f(c,o),L(w,c,null),f(n,i),f(n,l),f(l,a),f(l,u),L(k,l,null),f(n,m),f(n,b),f(b,_),f(b,y),L(N,b,null),x=!0},p(t,[e]){const s={};1&e&&(s.value=t[0]),w.$set(s);const c={};2&e&&(c.value=t[1]),k.$set(c);const r={};4&e&&(r.value=t[2]),N.$set(r),(!x||8&e&&v!==(v="bt-settings "+t[3].class))&&h(n,"class",v)},i(t){x||(q(w.$$.fragment,t),q(k.$$.fragment,t),q(N.$$.fragment,t),x=!0)},o(t){S(w.$$.fragment,t),S(k.$$.fragment,t),S(N.$$.fragment,t),x=!1},d(t){t&&$(n),O(w),O(k),O(N)}}}function pt(t){const n=parseInt(t.target.value);it.set(n)}function $t(t){const n=parseInt(t.target.value);lt.set(n)}function dt(t){at.set(t.target.value)}function mt(t,e,s){let c,r,o;it.subscribe(t=>{s(0,c=t)}),lt.subscribe(t=>{s(1,r=t)}),at.subscribe(t=>{s(2,o=t)});return t.$set=t=>{s(3,e=n(n({},e),u(t)))},e=u(e),[c,r,o,e]}class gt extends z{constructor(t){super(),G(this,t,mt,ft,o,{})}}function bt(t){let n,e,s;const c=t[4].default,r=i(c,t,t[3],null);return{c(){n=d("a"),r&&r.c(),h(n,"class",e="bt-link "+t[2].class),h(n,"href",t[0]),h(n,"target",t[1])},m(t,e){p(t,n,e),r&&r.m(n,null),s=!0},p(t,[o]){r&&r.p&&8&o&&r.p(l(c,t,t[3],null),a(c,t[3],o,null)),(!s||4&o&&e!==(e="bt-link "+t[2].class))&&h(n,"class",e),(!s||1&o)&&h(n,"href",t[0]),(!s||2&o)&&h(n,"target",t[1])},i(t){s||(q(r,t),s=!0)},o(t){S(r,t),s=!1},d(t){t&&$(n),r&&r.d(t)}}}function ht(t,e,s){let{href:c}=e,{target:r="_blank"}=e,{$$slots:o={},$$scope:i}=e;return t.$set=t=>{s(2,e=n(n({},e),u(t))),"href"in t&&s(0,c=t.href),"target"in t&&s(1,r=t.target),"$$scope"in t&&s(3,i=t.$$scope)},e=u(e),[c,r,e,i,o]}class _t extends z{constructor(t){super(),G(this,t,ht,bt,o,{href:0,target:1})}}function yt(t){let n;return{c(){n=m("GitHub")},m(t,e){p(t,n,e)},d(t){t&&$(n)}}}function vt(t){let n,e,s,c;const r=new _t({props:{href:"http://github.com/nbrylevv",$$slots:{default:[yt]},$$scope:{ctx:t}}});return{c(){n=d("ul"),e=d("li"),j(r.$$.fragment),h(e,"class","bt-links__item"),h(n,"class",s="bt-links "+t[0].class)},m(t,s){p(t,n,s),f(n,e),L(r,e,null),c=!0},p(t,[e]){const o={};2&e&&(o.$$scope={dirty:e,ctx:t}),r.$set(o),(!c||1&e&&s!==(s="bt-links "+t[0].class))&&h(n,"class",s)},i(t){c||(q(r.$$.fragment,t),c=!0)},o(t){S(r.$$.fragment,t),c=!1},d(t){t&&$(n),O(r)}}}function xt(t,e,s){return t.$set=t=>{s(0,e=n(n({},e),u(t)))},[e=u(e)]}class wt extends z{constructor(t){super(),G(this,t,xt,vt,o,{})}}function kt(n){let e;return{c(){e=d("div"),e.innerHTML="\n  Ваш браузер не поддерживает уведомления.<br>\n  Обновитесь и обязательно возвращайтесь :)\n"},m(t,n){p(t,e,n)},p:t,i:t,o:t,d(t){t&&$(e)}}}class Nt extends z{constructor(t){super(),G(this,t,null,kt,o,{})}}class Et{constructor(){this.currentNotification=null}get hasBrowserSupport(){return"Notification"in window}get hasPermission(){return"granted"===Notification.permission}requestPermission(t){Notification.requestPermission().then(()=>{console.log(""),t&&"function"==typeof t&&t()})}create(t,n){console.log("create",t),this.hasPermission&&(this.close(),this.currentNotification=new Notification(t,n||void 0),this.currentNotification.onclick=()=>{this.close()})}close(){this.currentNotification&&(this.currentNotification.close(),this.currentNotification=null)}}const Tt={[K]:"favicon-sandtime.ico",[Q]:"favicon-palm.ico",[R]:"favicon-timer.ico"};class At{constructor(){}get tag(){return document.getElementById("document-favicon")}update(t){this.tag.setAttribute("href","./favicon/"+t)}}function Pt(n){let e,s,c,r,o;const i=new st({props:{class:"bt-app__panel"}}),l=new gt({props:{class:"bt-app__settings"}}),a=new wt({props:{class:"bt-app__links"}});return{c(){e=d("div"),j(i.$$.fragment),s=g(),c=d("div"),j(l.$$.fragment),r=g(),j(a.$$.fragment),h(e,"class","bt-layout__side bt-layout__side_right"),h(c,"class","bt-layout__side bt-layout__side_left")},m(t,n){p(t,e,n),L(i,e,null),p(t,s,n),p(t,c,n),L(l,c,null),f(c,r),L(a,c,null),o=!0},p:t,i(t){o||(q(i.$$.fragment,t),q(l.$$.fragment,t),q(a.$$.fragment,t),o=!0)},o(t){S(i.$$.fragment,t),S(l.$$.fragment,t),S(a.$$.fragment,t),o=!1},d(t){t&&$(e),O(i),t&&$(s),t&&$(c),O(l),O(a)}}}function Bt(t){let n,e;const s=new J({props:{class:"bt-button_blue",$$slots:{default:[It]},$$scope:{ctx:t}}});return s.$on("click",t[13]),{c(){n=m("Необходимо разрешить уведомления\n\t\t\t"),j(s.$$.fragment)},m(t,c){p(t,n,c),L(s,t,c),e=!0},p(t,n){const e={};16384&n&&(e.$$scope={dirty:n,ctx:t}),s.$set(e)},i(t){e||(q(s.$$.fragment,t),e=!0)},o(t){S(s.$$.fragment,t),e=!1},d(t){t&&$(n),O(s,t)}}}function Ct(n){let e;const s=new Nt({});return{c(){j(s.$$.fragment)},m(t,n){L(s,t,n),e=!0},p:t,i(t){e||(q(s.$$.fragment,t),e=!0)},o(t){S(s.$$.fragment,t),e=!1},d(t){O(s,t)}}}function It(t){let n;return{c(){n=m("Разрешить")},m(t,e){p(t,n,e)},d(t){t&&$(n)}}}function Mt(t){let n,e,s,c,r;const o=[Ct,Bt,Pt],i=[];return s=function(t,n){return t[0].hasBrowserSupport?t[0].hasPermission?2:1:0}(t),c=i[s]=o[s](t),{c(){n=d("main"),e=d("div"),c.c(),h(e,"class","bt-layout"),h(n,"class","bt-app")},m(t,c){p(t,n,c),f(n,e),i[s].m(e,null),r=!0},p(t,[n]){c.p(t,n)},i(t){r||(q(c),r=!0)},o(t){S(c),r=!1},d(t){t&&$(n),i[s].d()}}}function qt(t){const n=new Et,e=new At;let s=null,c=null,r={},o=null;const i=ut.subscribe(t=>{r=t,X.set(R)}),l=X.subscribe(t=>{switch(o=t,t){case K:e.update(Tt[t]),s||a();break;case R:e.update(Tt[t]),u(),p();break;case Q:e.update(Tt[t])}});function a(){u(),o!==K&&X.set(K),s=setInterval(()=>{$(),f()},1e3*r.intervalTime*60)}function u(t=!1){clearInterval(s),t&&X.set(R)}function f(){X.set(Q),u(),c=setTimeout(()=>{p(),a()},1e3*r.breakTime)}function p(){clearTimeout(c)}function $(){n.create("Breaktify!",{body:`${r.notificationMessage}\n Отдохните следующие ${r.breakTime} секунд`,image:"./images/palm.png",icon:"./images/palm.png"})}return[n,s,c,r,o,e,i,l,a,u,f,p,$,()=>n.requestPermission()]}return new class extends z{constructor(t){super(),G(this,t,qt,Mt,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
